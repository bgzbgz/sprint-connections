<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Size Tool | Fast Track</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @font-face {
            font-family: 'Plaak';
            src: url('Plaak3Trial-43-Bold.otf') format('opentype');
            font-weight: bold;
        }

        @font-face {
            font-family: 'Riforma';
            src: url('RiformaLL-Regular.otf') format('opentype');
            font-weight: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Riforma', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 16px;
            color: #000000;
            background: #FFFFFF;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .plaak {
            font-family: 'Plaak', sans-serif;
            font-weight: bold;
            letter-spacing: -0.01em;
            line-height: 1.2;
        }

        .smooth {
            transition: all 0.2s ease;
        }

        .worksheet-input {
            border: 1px solid #E0E0E0;
            padding: 12px 16px;
            font-family: 'Riforma', sans-serif;
            font-size: 16px;
            transition: border-color 0.2s ease;
            background: #FFFFFF;
            width: 100%;
        }

        .worksheet-input:focus {
            outline: none;
            border-color: #000000;
        }

        .worksheet-input::placeholder {
            color: #9CA3AF;
        }

        .numbered-section {
            background: #000000;
            color: #FFFFFF;
            padding: 10px 16px;
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        .btn-primary {
            background: #000000;
            color: #FFFFFF;
            padding: 12px 24px;
            border: 2px solid #000000;
            font-family: 'Riforma', sans-serif;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary:hover:not(:disabled) {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn-primary:disabled {
            background: #E0E0E0;
            border-color: #E0E0E0;
            color: #9CA3AF;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .btn-secondary {
            background: #FFFFFF;
            color: #000000;
            padding: 12px 24px;
            border: 2px solid #000000;
            font-family: 'Riforma', sans-serif;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            background: #F8F8F8;
        }

        .help-button {
            position: fixed;
            top: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #000000;
            color: #FFFFFF;
            border: 2px solid #000000;
            font-size: 28px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 40;
            transition: all 0.2s ease;
        }

        .help-button:hover {
            transform: scale(1.1);
            background: #fff469;
            color: #000000;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #E0E0E0;
            transition: all 0.2s ease;
        }

        .progress-dot.active {
            background: #000000;
            transform: scale(1.3);
        }

        .progress-dot.completed {
            background: #000000;
        }

        .result-card {
            background: #FFFFFF;
            border: 2px solid #000000;
            padding: 24px;
            transition: all 0.2s ease;
        }

        .result-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .force-row {
            border: 1px solid #E0E0E0;
            transition: all 0.2s ease;
        }

        .force-row:hover {
            border-color: #000000;
            background: #F8F8F8;
        }

        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: #E0E0E0;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #000000;
            cursor: pointer;
            border-radius: 50%;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #000000;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }

        .top-force-badge {
            background: #000000;
            color: #fff469;
            font-size: 14px;
            padding: 6px 12px;
            border-radius: 4px;
            font-weight: bold;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .animate-in {
            animation: slideIn 0.3s ease-out;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @media print {
            .no-print {
                display: none;
            }
        }

        .cover-overlay {
            background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.7));
        }

        .rank-medal {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
        }

        .gold { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .silver { background: linear-gradient(135deg, #C0C0C0, #808080); }
        .bronze { background: linear-gradient(135deg, #CD7F32, #8B4513); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Helper Functions
        const formatCurrency = (value, currency = '€') => {
            if (!value && value !== 0) return '-';
            return `${currency} ${Math.round(value).toLocaleString('en-US')}`;
        };

        // Webhook Submission Function
        const submitToWebhook = async (data) => {
            const webhookUrl = 'https://n8n-edge.fasttrack-diagnostic.com/webhook/608b17ea-9618-4877-ae3c-85eb2e89b700';
            
            const payload = {
                toolName: 'market_size',
                userId: data.userEmail,
                sprintNumber: 12,
                timestamp: new Date().toISOString(),
                data: data
            };

            try {
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                return { success: true };
            } catch (error) {
                console.error('Webhook submission error:', error);
                return { success: false, error: error.message };
            }
        };

        // Help Modal Component
        function HelpModal({ isOpen, onClose, content }) {
            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 fade-in">
                    <div className="bg-white max-w-3xl p-12 border-8 border-black max-h-[80vh] overflow-y-auto">
                        <div className="flex justify-between items-start mb-6">
                            <h2 className="plaak text-5xl">INSTRUCTIONS</h2>
                            <button onClick={onClose} className="text-4xl font-bold hover:text-gray-600">×</button>
                        </div>
                        {content}
                        <button className="btn-primary w-full text-xl py-4 mt-8" onClick={onClose}>
                            GOT IT
                        </button>
                    </div>
                </div>
            );
        }

        // Main App Component
        function MarketSizeTool() {
            const [step, setStep] = useState(0);
            const [step1Phase, setStep1Phase] = useState(1); // 1: inputs, 2: market result, 3: margin input, 4: profit result
            const [step2Phase, setStep2Phase] = useState('list');
            const [showMistakesPopup, setShowMistakesPopup] = useState(false);
            const [showHelp, setShowHelp] = useState(false);
            const [userEmail, setUserEmail] = useState('');
            const [isSubmitting, setIsSubmitting] = useState(false);
            
            const [marketData, setMarketData] = useState({
                totalCustomers: '',
                avgSpending: '',
                purchasesPerYear: '',
                grossMargin: ''
            });
            
            const [drivingForces, setDrivingForces] = useState([
                { id: 1, name: '', impact: 3, probability: 3 },
                { id: 2, name: '', impact: 3, probability: 3 },
                { id: 3, name: '', impact: 3, probability: 3 }
            ]);
            const [impactData, setImpactData] = useState({});

            // Calculations
            const currentYear = new Date().getFullYear();
            const futureYear = currentYear + 3;

            const marketSize = marketData.totalCustomers && marketData.avgSpending && marketData.purchasesPerYear
                ? marketData.totalCustomers * marketData.avgSpending * marketData.purchasesPerYear
                : 0;

            const profitPool = marketSize && marketData.grossMargin
                ? marketSize * (marketData.grossMargin / 100)
                : 0;

            const calculateScore = (impact, probability) => (2 * impact) + probability;

            const rankedForces = drivingForces
                .filter(f => f.name.trim())
                .map(f => ({
                    ...f,
                    score: calculateScore(f.impact, f.probability)
                }))
                .sort((a, b) => b.score - a.score);

            const topForces = rankedForces.slice(0, 7);

            // Future calculations
            const calculateFuture = () => {
                if (!marketSize) return { customers: 0, marketSize: 0, profitPool: 0, margin: 0, growth: 0 };

                let customerMultiplier = 1;
                let spendingMultiplier = 1;
                let purchasesMultiplier = 1;
                let marginChange = 0;

                topForces.forEach(force => {
                    const impact = impactData[force.id] || { customers: 0, spending: 0, purchases: 0, margin: 0 };
                    customerMultiplier *= (1 + impact.customers / 100);
                    spendingMultiplier *= (1 + impact.spending / 100);
                    purchasesMultiplier *= (1 + impact.purchases / 100);
                    marginChange += impact.margin;
                });

                const futureCustomers = Math.round(marketData.totalCustomers * customerMultiplier);
                const futureMarketSize = marketSize * customerMultiplier * spendingMultiplier * purchasesMultiplier;
                const futureMargin = parseFloat(marketData.grossMargin) + marginChange;
                const futureProfitPool = futureMarketSize * (futureMargin / 100);

                return {
                    customers: futureCustomers,
                    marketSize: futureMarketSize,
                    profitPool: futureProfitPool,
                    margin: futureMargin,
                    growth: marketSize > 0 ? ((futureMarketSize - marketSize) / marketSize) * 100 : 0
                };
            };

            const future = calculateFuture();

            // Auto-save functionality
            useEffect(() => {
                if (userEmail && step > 0) {
                    const autoSaveData = {
                        userEmail,
                        lastSaved: new Date().toISOString(),
                        currentStep: step,
                        marketData,
                        drivingForces,
                        impactData
                    };
                    localStorage.setItem('marketSizeTool_autosave', JSON.stringify(autoSaveData));
                }
            }, [marketData, drivingForces, impactData, step]);

            // Load auto-save on mount
            useEffect(() => {
                const savedData = localStorage.getItem('marketSizeTool_autosave');
                if (savedData && !marketData.totalCustomers) {
                    try {
                        const parsed = JSON.parse(savedData);
                        if (parsed.userEmail && confirm('Would you like to restore your previous session?')) {
                            setUserEmail(parsed.userEmail);
                            setMarketData(parsed.marketData || marketData);
                            setDrivingForces(parsed.drivingForces || drivingForces);
                            setImpactData(parsed.impactData || {});
                            setStep(parsed.currentStep || 0);
                        }
                    } catch (e) {
                        console.error('Failed to restore session:', e);
                    }
                }
            }, []);

            // Validation
            const canProceedStep1Phase1 = marketData.totalCustomers > 0 && 
                                   marketData.avgSpending > 0 && 
                                         marketData.purchasesPerYear > 0;

            const canProceedStep1 = canProceedStep1Phase1 && 
                                   marketData.grossMargin > 0 && 
                                   marketData.grossMargin <= 100;

            const canProceedStep2 = rankedForces.length >= 3;

            // Help content based on current step
            const getHelpContent = () => {
                if (step === 1) {
                    return (
                        <div>
                            <h3 className="plaak text-3xl mb-4">WHY</h3>
                            <p className="mb-6 text-lg">Setting targets precedes strategy formulation. Market size and profitability are the only viable context within which the business can set targets and develop strategies.</p>
                            
                            <h3 className="plaak text-3xl mb-4">WHAT</h3>
                            <p className="mb-6 text-lg">Determine the size of the market in terms of total size and total profit pool.</p>
                            
                            <h3 className="plaak text-3xl mb-4">HOW</h3>
                            <ol className="text-lg space-y-2">
                                <li>1. Define the number of customers who are potential buyers</li>
                                <li>2. Determine how many products/services they buy per year</li>
                                <li>3. Determine the average price they pay</li>
                                <li>4. Multiply the above 3 variables for market size</li>
                                <li>5. Multiply by your gross margin % for profit pool</li>
                            </ol>
                        </div>
                    );
                } else if (step === 2) {
                    return (
                        <div>
                            <h3 className="plaak text-3xl mb-4">WHY</h3>
                            <p className="mb-6 text-lg">The ability to predict the future is the ability to understand the driving forces. This tool helps you determine what forces will impact your industry over the next 3 years.</p>
                            
                            <h3 className="plaak text-3xl mb-4">WHAT</h3>
                            <p className="mb-6 text-lg">Identify and describe the main driving forces today that will determine changes in your industry in the next 3 years.</p>
                            
                            <h3 className="plaak text-3xl mb-4">HOW</h3>
                            <ol className="text-lg space-y-2">
                                <li>1. Create a list of visible driving forces</li>
                                <li>2. Evaluate impact (1-5): 1=very low, 5=very high</li>
                                <li>3. Evaluate probability (1-5): 1=very low, 5=very high</li>
                            </ol>
                            
                            <div className="mt-6 bg-gray-100 p-4 border-l-4 border-black">
                                <p className="font-bold mb-2">MISTAKES TO AVOID</p>
                                <ul className="text-base space-y-1">
                                    <li>• Missing top 3-5 high-impact forces</li>
                                    <li>• Not understanding industry impact</li>
                                    <li>• Ignoring blind spots</li>
                                    <li>• Underestimating technology speed</li>
                                </ul>
                            </div>
                        </div>
                    );
                } else if (step === 3) {
                    return (
                        <div>
                            <h3 className="plaak text-3xl mb-4">WHY</h3>
                            <p className="mb-6 text-lg">We are creating a strategy not for today, but for the next 3 years. Understanding future impact is critical.</p>
                            
                            <h3 className="plaak text-3xl mb-4">WHAT</h3>
                            <p className="mb-6 text-lg">Understand how the market will change by estimating the effect of driving forces on: customers, spending, purchases, and gross margin.</p>
                            
                            <h3 className="plaak text-3xl mb-4">HOW</h3>
                            <p className="text-lg">Insert the % amount (positive or negative) that each driving force will change the four pillars. Changes compound multiplicatively.</p>
                        </div>
                    );
                }
                return null;
            };

            return (
                <div className="min-h-screen bg-white">
                    {/* Help Button - Show on steps 1-3 */}
                    {step >= 1 && step <= 3 && (
                        <button className="help-button no-print" onClick={() => setShowHelp(true)}>
                            ?
                        </button>
                    )}

                    {/* Help Modal */}
                    <HelpModal isOpen={showHelp} onClose={() => setShowHelp(false)} content={getHelpContent()} />

                    {/* Cover Page */}
                    {step === 0 && (
                        <div className="relative min-h-screen flex items-center justify-center">
                            <img 
                                src="get out of the box.jpg" 
                                alt="Volcano erupting" 
                                className="absolute inset-0 w-full h-full object-cover"
                            />
                            <div className="absolute inset-0 cover-overlay"></div>
                            <div className="relative z-10 text-center text-white px-8">
                                <h1 className="plaak text-9xl mb-6 animate-in">MARKET SIZE TOOL</h1>
                                <p className="text-3xl mb-12 animate-in" style={{animationDelay: '0.2s'}}>
                                    Calculate your Total Addressable Market and 3-year forecast
                                </p>
                                <button 
                                    className="bg-white text-black plaak text-3xl px-16 py-6 border-4 border-white hover:bg-black hover:text-white transition-all duration-200 animate-in"
                                    style={{animationDelay: '0.4s'}}
                                    onClick={() => setStep(0.5)}
                                >
                                    START
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Intro Screen - BIGGER FONTS */}
                    {step === 0.5 && (
                        <div className="bg-black text-white min-h-screen p-16">
                            <div className="max-w-5xl mx-auto">
                                <h1 className="plaak text-9xl mb-16 animate-in">BEFORE WE START</h1>
                                
                                <div className="mb-12 animate-in" style={{animationDelay: '0.05s'}}>
                                    <h2 className="plaak text-6xl mb-6">YOUR EMAIL</h2>
                                    <input
                                        type="email"
                                        className="worksheet-input text-3xl w-full text-black"
                                        placeholder="your@email.com"
                                        value={userEmail}
                                        onChange={(e) => setUserEmail(e.target.value)}
                                        required
                                    />
                                    <p className="text-xl text-gray-400 mt-3">
                                        We'll use this to save your progress.
                                    </p>
                                </div>

                                <div className="mb-12 animate-in" style={{animationDelay: '0.1s'}}>
                                    <h2 className="plaak text-6xl mb-6">PURPOSE</h2>
                                    <p className="text-3xl leading-relaxed">
                                        Calculate your Total Addressable Market and forecast changes over 3 years 
                                        using your team's knowledge—no expensive research needed.
                                    </p>
                                    <p className="text-2xl text-gray-400 mt-4">
                                        Use 60-70% accuracy with internal team knowledge instead of aiming for 100% accuracy.
                                    </p>
                                </div>

                                <div className="mb-12 animate-in" style={{animationDelay: '0.2s'}}>
                                    <h2 className="plaak text-6xl mb-6" style={{color: '#fff469'}}>MISTAKES TO AVOID</h2>
                                    <ul className="text-2xl space-y-4">
                                        <li className="flex items-start">
                                            <span className="text-4xl mr-4">•</span>
                                            <span>Missing top 3-5 high-impact forces</span>
                                        </li>
                                        <li className="flex items-start">
                                            <span className="text-4xl mr-4">•</span>
                                            <span>Not understanding industry impact</span>
                                        </li>
                                        <li className="flex items-start">
                                            <span className="text-4xl mr-4">•</span>
                                            <span>Aiming for 100% accuracy (60-70% is the goal)</span>
                                        </li>
                                        <li className="flex items-start">
                                            <span className="text-4xl mr-4">•</span>
                                            <span>Underestimating technology speed</span>
                                        </li>
                                        <li className="flex items-start">
                                            <span className="text-4xl mr-4">•</span>
                                            <span>Ignoring blind spots</span>
                                        </li>
                                    </ul>
                                </div>

                                <div className="mb-16 animate-in" style={{animationDelay: '0.3s'}}>
                                    <h2 className="plaak text-6xl mb-8">THE JOURNEY</h2>
                                    <div className="grid grid-cols-3 gap-8 text-center">
                                        <div className="border-2 border-white p-8">
                                            <div className="text-9xl plaak mb-4">01</div>
                                            <p className="text-2xl font-bold mb-2">Market Size</p>
                                            <p className="text-xl text-gray-400">2 minutes</p>
                                        </div>
                                        <div className="border-2 border-white p-8">
                                            <div className="text-9xl plaak mb-4">02</div>
                                            <p className="text-2xl font-bold mb-2">Driving Forces</p>
                                            <p className="text-xl text-gray-400">5 minutes</p>
                                        </div>
                                        <div className="border-2 border-white p-8">
                                            <div className="text-9xl plaak mb-4">03</div>
                                            <p className="text-2xl font-bold mb-2">Future Impact</p>
                                            <p className="text-xl text-gray-400">5 minutes</p>
                                        </div>
                                    </div>
                                </div>

                                <button 
                                    className="btn-primary w-full text-3xl py-8 plaak animate-in" 
                                    style={{animationDelay: '0.4s'}}
                                    onClick={() => setStep(1)}
                                    disabled={!userEmail || !userEmail.includes('@')}
                                >
                                    LET'S START →
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Header (shown for steps 1-3) */}
                    {step >= 1 && step < 4 && (
                        <>
                            <header className="border-b-2 border-black py-6 px-8 no-print">
                                <div className="flex justify-between items-start">
                                    <div>
                                        <h1 className="plaak text-3xl">MARKET SIZE TOOL</h1>
                                        <p className="text-sm mt-2 text-gray-600">Calculate your Total Addressable Market and 3-year forecast</p>
                                    </div>
                                    <div className="text-right">
                                        <div className="text-xs text-gray-500">✓ Auto-saving progress</div>
                                        <div className="text-xs text-gray-400 mt-1">{userEmail}</div>
                                    </div>
                                </div>
                    </header>

                    {/* Progress Indicator */}
                    <div className="border-b border-gray-200 py-6 px-8 no-print">
                        <div className="flex items-center justify-between max-w-2xl">
                            <div className="flex items-center gap-2">
                                <div className={`progress-dot ${step >= 1 ? 'active' : ''} ${step > 1 ? 'completed' : ''}`}></div>
                                <span className={`text-sm ${step === 1 ? 'font-bold' : ''}`}>Market Size</span>
                            </div>
                            <div className="flex-1 h-0.5 bg-gray-200 mx-4">
                                <div className={`h-full bg-black transition-all ${step > 1 ? 'w-full' : 'w-0'}`}></div>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className={`progress-dot ${step >= 2 ? 'active' : ''} ${step > 2 ? 'completed' : ''}`}></div>
                                <span className={`text-sm ${step === 2 ? 'font-bold' : ''}`}>Driving Forces</span>
                            </div>
                            <div className="flex-1 h-0.5 bg-gray-200 mx-4">
                                <div className={`h-full bg-black transition-all ${step > 2 ? 'w-full' : 'w-0'}`}></div>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className={`progress-dot ${step >= 3 ? 'active' : ''}`}></div>
                                <span className={`text-sm ${step === 3 ? 'font-bold' : ''}`}>Future Impact</span>
                            </div>
                        </div>
                    </div>
                        </>
                    )}

                    {/* Main Content - NO SIDEBAR, FULL WIDTH */}
                    <div>
                        {/* Step 1: Market Size */}
                        {step === 1 && <Step1 
                            marketData={marketData}
                            setMarketData={setMarketData}
                            marketSize={marketSize}
                            profitPool={profitPool}
                            currentYear={currentYear}
                            phase={step1Phase}
                            setPhase={setStep1Phase}
                            canProceedPhase1={canProceedStep1Phase1}
                            canProceed={canProceedStep1}
                            onNext={() => setStep(1.5)}
                        />}

                        {/* Transition Screen */}
                        {step === 1.5 && <TransitionScreen
                            marketSize={marketSize}
                            profitPool={profitPool}
                            onNext={() => setStep(2)}
                        />}

                        {/* Step 2: Driving Forces */}
                        {step === 2 && <Step2
                            drivingForces={drivingForces}
                            setDrivingForces={setDrivingForces}
                            rankedForces={rankedForces}
                            topForces={topForces}
                            phase={step2Phase}
                            setPhase={setStep2Phase}
                            canProceed={canProceedStep2}
                            showMistakesPopup={showMistakesPopup}
                            setShowMistakesPopup={setShowMistakesPopup}
                            onBack={() => setStep(1)}
                            onNext={() => setStep(3)}
                        />}

                        {/* Step 3: Future Impact */}
                        {step === 3 && <Step3
                            topForces={topForces}
                            impactData={impactData}
                            setImpactData={setImpactData}
                            marketData={marketData}
                            marketSize={marketSize}
                            profitPool={profitPool}
                            future={future}
                            currentYear={currentYear}
                            futureYear={futureYear}
                            onBack={() => setStep(2)}
                            userEmail={userEmail}
                            drivingForces={drivingForces}
                        />}
                    </div>
                </div>
            );
        }

        // Transition Screen Component
        function TransitionScreen({ marketSize, profitPool, onNext }) {
            return (
                <div className="bg-black text-white min-h-screen flex items-center justify-center p-16">
                    <div className="max-w-4xl text-center">
                        <h1 className="plaak text-8xl mb-12 text-green-400 animate-in">✓ MARKET SIZE COMPLETE</h1>
                        
                        <div className="grid grid-cols-2 gap-8 mb-16">
                            <div className="border-4 border-white p-8">
                                <p className="text-xl text-gray-400 mb-4">Market Size</p>
                                <p className="plaak text-5xl text-green-400">{formatCurrency(marketSize)}</p>
                            </div>
                            <div className="border-4 border-white p-8">
                                <p className="text-xl text-gray-400 mb-4">Profit Pool</p>
                                <p className="plaak text-5xl text-green-400">{formatCurrency(profitPool)}</p>
                            </div>
                        </div>

                        <p className="text-3xl mb-12 leading-relaxed">
                            Next, we'll identify the <span className="plaak text-yellow-400">driving forces</span> that will change this market over the next 3 years.
                        </p>

                        <button className="btn-primary text-3xl py-6 px-16" onClick={onNext}>
                            Continue to Driving Forces →
                        </button>
                    </div>
                </div>
            );
        }

        // Step 1: Market Size Component - REDESIGNED
        function Step1({ marketData, setMarketData, marketSize, profitPool, currentYear, phase, setPhase, canProceedPhase1, canProceed, onNext }) {
            return (
                <main className="p-12 max-w-6xl mx-auto">
                    <div className="animate-in">
                            <div className="numbered-section mb-8">
                            [01] MARKET SIZE
                            </div>

                        {/* Phase 1: Market Size Input */}
                        {phase === 1 && (
                            <>
                                <div className="bg-black text-white border-4 border-black p-6 mb-8">
                                    <h3 className="plaak text-3xl mb-2">CALCULATE MARKET SIZE</h3>
                                    <p className="text-xl">
                                        Enter your basic market data to calculate the total addressable market.
                                    </p>
                                </div>

                                <div className="grid grid-cols-3 gap-6 mb-8">
                                <div>
                                        <label className="block font-bold mb-2 text-lg">Total Number of Customers</label>
                                    <input
                                        type="number"
                                            className="worksheet-input text-lg"
                                        placeholder="e.g., 10,000"
                                        value={marketData.totalCustomers}
                                        onChange={(e) => setMarketData({...marketData, totalCustomers: parseFloat(e.target.value) || ''})}
                                    />
                                    <p className="text-sm text-gray-500 mt-1">All potential buyers in your market</p>
                                </div>

                                <div>
                                        <label className="block font-bold mb-2 text-lg">Average Spending per Customer</label>
                                    <input
                                        type="number"
                                            className="worksheet-input text-lg"
                                        placeholder="e.g., 35,000"
                                        value={marketData.avgSpending}
                                        onChange={(e) => setMarketData({...marketData, avgSpending: parseFloat(e.target.value) || ''})}
                                    />
                                    <p className="text-sm text-gray-500 mt-1">Average price per product/service (€)</p>
                                </div>

                                <div>
                                        <label className="block font-bold mb-2 text-lg">Average Purchases per Year</label>
                                    <input
                                        type="number"
                                            className="worksheet-input text-lg"
                                        placeholder="e.g., 1"
                                        value={marketData.purchasesPerYear}
                                        onChange={(e) => setMarketData({...marketData, purchasesPerYear: parseFloat(e.target.value) || ''})}
                                    />
                                    <p className="text-sm text-gray-500 mt-1">Purchase frequency per customer</p>
                                    </div>
                                </div>

                                <div className="flex justify-end">
                                    <button 
                                        className="btn-primary text-xl py-4 px-8"
                                        disabled={!canProceedPhase1}
                                        onClick={() => setPhase(2)}
                                    >
                                        Calculate Market Size →
                                    </button>
                                </div>
                            </>
                        )}

                        {/* Phase 2: Market Size Result */}
                        {phase === 2 && (
                            <>
                                <div className="bg-green-600 text-white border-4 border-green-600 p-8 mb-8 text-center">
                                    <h3 className="plaak text-4xl mb-4">✓ MARKET SIZE CALCULATED</h3>
                                    <div className="plaak text-7xl">{formatCurrency(marketSize)}</div>
                                    <p className="text-xl mt-2">{currentYear}</p>
                                </div>

                                <div className="flex justify-end">
                                    <button 
                                        className="btn-primary text-xl py-4 px-8"
                                        onClick={() => setPhase(3)}
                                    >
                                        Continue to Profit Pool →
                                    </button>
                                </div>
                            </>
                        )}

                        {/* Phase 3: Profit Pool Input */}
                        {phase === 3 && (
                            <>
                                <div className="bg-black text-white border-4 border-black p-6 mb-8">
                                    <h3 className="plaak text-3xl mb-2">CALCULATE PROFIT POOL</h3>
                                    <p className="text-xl">
                                        Enter your gross profit margin to calculate the available profit pool.
                                    </p>
                                </div>

                                <div className="max-w-md mb-8">
                                    <label className="block font-bold mb-2 text-lg">Gross Profit Margin (%)</label>
                                    <input
                                        type="number"
                                        className="worksheet-input text-lg"
                                        placeholder="e.g., 15"
                                        value={marketData.grossMargin}
                                        onChange={(e) => setMarketData({...marketData, grossMargin: parseFloat(e.target.value) || ''})}
                                    />
                                    <p className="text-sm text-gray-500 mt-1">Your company's gross margin (0-100)</p>
                                </div>

                                <div className="flex justify-end">
                                    <button 
                                        className="btn-primary text-xl py-4 px-8"
                                        disabled={!canProceed}
                                        onClick={() => setPhase(4)}
                                    >
                                        Calculate Profit Pool →
                                    </button>
                                </div>
                            </>
                        )}

                        {/* Phase 4: Complete Results */}
                        {phase === 4 && (
                            <>
                                <div className="grid grid-cols-2 gap-8 mb-8">
                                    <div className="result-card">
                                        <div className="text-sm text-gray-600 mb-2">Market Size</div>
                                        <div className="text-sm text-gray-500 mb-1">{currentYear}</div>
                                        <div className="plaak text-6xl">{formatCurrency(marketSize)}</div>
                                    </div>

                                    <div className="result-card border-4 border-green-600">
                                        <div className="text-sm text-gray-600 mb-2">Profit Pool</div>
                                        <div className="text-sm text-gray-500 mb-1">{currentYear}</div>
                                        <div className="plaak text-6xl text-green-600">{formatCurrency(profitPool)}</div>
                                    </div>
                                </div>

                                <div className="flex justify-end">
                                    <button 
                                        className="btn-primary text-xl py-4 px-8"
                                        onClick={onNext}
                                    >
                                        Next: Driving Forces →
                                    </button>
                                </div>
                            </>
                        )}
                    </div>
                </main>
            );
        }

        // Step 2: Driving Forces Component - COMPACT SLIDERS
        function Step2({ drivingForces, setDrivingForces, rankedForces, topForces, phase, setPhase, canProceed, showMistakesPopup, setShowMistakesPopup, onBack, onNext }) {
            const addForce = () => {
                const newId = Math.max(...drivingForces.map(f => f.id), 0) + 1;
                setDrivingForces([...drivingForces, { id: newId, name: '', impact: 3, probability: 3 }]);
            };

            const updateForce = (id, field, value) => {
                setDrivingForces(drivingForces.map(f => 
                    f.id === id ? { ...f, [field]: value } : f
                ));
            };

            const removeForce = (id) => {
                if (drivingForces.length > 3) {
                    setDrivingForces(drivingForces.filter(f => f.id !== id));
                }
            };

            const calculateScore = (impact, probability) => (2 * impact) + probability;

            return (
                <>
                    <main className="p-12 max-w-7xl mx-auto">
                        <div className="animate-in">
                            <div className="numbered-section mb-8">
                                [02] DRIVING FORCES
                            </div>

                            {/* LIST Phase */}
                            {phase === 'list' && (
                                <>
                                    <div className="bg-black text-white border-4 border-black p-6 mb-8">
                                        <h3 className="plaak text-3xl mb-2">LIST YOUR DRIVING FORCES</h3>
                                        <p className="text-xl">
                                            Brainstorm 30-40 driving forces that will impact your industry. Think broadly - quantity matters in brainstorming.
                                        </p>
                                    </div>

                                    <div className="space-y-4 mb-6">
                                        {drivingForces.map((force, index) => (
                                            <div key={force.id} className="force-row p-4 rounded flex gap-4 items-center">
                                                <div className="flex-shrink-0 w-10 h-10 bg-black text-white rounded-full flex items-center justify-center font-bold text-lg">
                                                    {index + 1}
                                                </div>
                                                
                                                <input
                                                    type="text"
                                                    className="worksheet-input text-lg flex-1"
                                                    placeholder="e.g., AI automation, new regulations, market consolidation..."
                                                    value={force.name}
                                                    onChange={(e) => updateForce(force.id, 'name', e.target.value)}
                                                />

                                                {drivingForces.length > 3 && (
                                                    <button
                                                        onClick={() => removeForce(force.id)}
                                                        className="text-gray-400 hover:text-black text-3xl font-bold"
                                                    >
                                                        ×
                                                    </button>
                                                )}
                        </div>
                                        ))}
                            </div>

                                        <button 
                                        className="btn-secondary text-lg w-full py-4 mb-8"
                                            onClick={addForce}
                                        >
                                            + Add Force
                                    </button>

                                    {canProceed && (
                                        <div className="flex justify-end">
                                            <button 
                                                className="btn-primary text-xl py-4 px-8"
                                                onClick={() => setPhase('score')}
                                            >
                                                Continue to Scoring →
                                        </button>
                                    </div>
                                    )}
                                </>
                            )}

                            {/* SCORE Phase - COMPACT HORIZONTAL SLIDERS */}
                            {phase === 'score' && (
                                <>
                                    <div className="bg-black text-white border-4 border-black p-6 mb-8">
                                        <h3 className="plaak text-3xl mb-2">SCORE IMPACT & LIKELIHOOD</h3>
                                        <p className="text-xl">
                                            Rate each force based on its impact and likelihood of happening. This will rank them automatically.
                                        </p>
                                    </div>

                                    <div className="space-y-4 mb-6">
                                        {drivingForces.map((force, index) => (
                                            <div key={force.id} className="force-row p-6 rounded">
                                                <div className="flex items-center gap-4 mb-4">
                                                    <div className="flex-shrink-0 w-10 h-10 bg-black text-white rounded-full flex items-center justify-center font-bold text-lg">
                                                        {index + 1}
                                                    </div>
                                                    <p className="font-bold text-lg flex-1">{force.name}</p>
                                                    {force.name && (
                                                        <div className="text-right">
                                                            <span className="text-sm text-gray-600">Score: </span>
                                                            <span className="plaak text-2xl">{calculateScore(force.impact, force.probability)}</span>
                                                        </div>
                                                    )}
                                                    </div>
                                                    
                                                <div className="grid grid-cols-2 gap-6">
                                                            <div>
                                                        <div className="flex items-center justify-between mb-2">
                                                            <span className="font-bold">Impact: {force.impact}</span>
                                                            <span className="text-sm text-gray-500">1 (Low) - 5 (High)</span>
                                                        </div>
                                                                <input
                                                                    type="range"
                                                                    min="1"
                                                                    max="5"
                                                                    className="slider"
                                                                    value={force.impact}
                                                                    onChange={(e) => updateForce(force.id, 'impact', parseInt(e.target.value))}
                                                                />
                                                            </div>

                                                            <div>
                                                        <div className="flex items-center justify-between mb-2">
                                                            <span className="font-bold">Likelihood: {force.probability}</span>
                                                            <span className="text-sm text-gray-500">1 (Low) - 5 (High)</span>
                                                        </div>
                                                                <input
                                                                    type="range"
                                                                    min="1"
                                                                    max="5"
                                                                    className="slider"
                                                                    value={force.probability}
                                                                    onChange={(e) => updateForce(force.id, 'probability', parseInt(e.target.value))}
                                                                />
                                                                </div>
                                                            </div>
                                                        </div>
                                        ))}
                                                    </div>

                                                        <button
                                        className="btn-secondary text-lg w-full py-4 mb-8"
                                        onClick={addForce}
                                                        >
                                        + Add Force
                                                        </button>

                                    <div className="flex justify-end">
                                        <button 
                                            className="btn-primary text-xl py-4 px-8"
                                            onClick={() => setPhase('rank')}
                                        >
                                            Show Rankings →
                                        </button>
                                    </div>
                                </>
                            )}

                            {/* RANK Phase - CENTRAL STAGE */}
                            {phase === 'rank' && (
                                <>
                                    <div className="bg-black text-white border-4 border-black p-6 mb-8">
                                        <h3 className="plaak text-3xl mb-2">TOP FORCES IDENTIFIED</h3>
                                        <p className="text-xl">
                                            Your top 7 forces have been ranked. These will shape your 3-year forecast.
                                        </p>
                                </div>

                                    {/* CENTRAL STAGE RANKINGS */}
                                    <div className="grid grid-cols-1 gap-6 mb-12">
                                        {rankedForces.slice(0, 7).map((force, index) => (
                                                <div 
                                                    key={force.id} 
                                                className="p-8 border-4 border-black rounded-lg bg-white"
                                            >
                                                <div className="flex items-center gap-6">
                                                    <div className="w-16 h-16 bg-black text-white rounded-full flex items-center justify-center text-2xl font-bold">
                                                        #{index + 1}
                                                    </div>
                                                    
                                                        <div className="flex-1">
                                                        <p className="plaak text-3xl mb-2">{force.name}</p>
                                                        <div className="flex gap-6 text-lg">
                                                            <span>Impact: <span className="font-bold">{force.impact}</span></span>
                                                            <span>Likelihood: <span className="font-bold">{force.probability}</span></span>
                                                            <span className="plaak">Score: {force.score}</span>
                                                            </div>
                                                        </div>
                                                    
                                                    <div className="bg-black text-white px-8 py-4 rounded-lg">
                                                        <span className="plaak text-xl">TOP FORCE</span>
                                                    </div>
                                                    </div>
                                                </div>
                                            ))}
                            </div>

                                    <div className="flex justify-between">
                                        <button className="btn-secondary text-lg py-3 px-6" onClick={onBack}>
                                    ← Back
                                </button>
                                <button 
                                            className="btn-primary text-xl py-4 px-8"
                                    onClick={onNext}
                                >
                                    Next: Impact Analysis →
                                </button>
                            </div>
                                </>
                            )}

                            {/* Navigation for list and score phases */}
                            {(phase === 'list' || phase === 'score') && (
                                <div className="flex justify-start mt-8">
                                    <button className="btn-secondary text-lg py-3 px-6" onClick={onBack}>
                                        ← Back
                                    </button>
                                </div>
                            )}
                        </div>
                    </main>
                </>
            );
        }

        // Step 3: Future Impact Component
        function Step3({ topForces, impactData, setImpactData, marketData, marketSize, profitPool, future, currentYear, futureYear, onBack, userEmail, drivingForces }) {
            const updateImpact = (forceId, field, value) => {
                setImpactData({
                    ...impactData,
                    [forceId]: {
                        ...(impactData[forceId] || { customers: 0, spending: 0, purchases: 0, margin: 0 }),
                        [field]: parseFloat(value) || 0
                    }
                });
            };

            const getTotalChange = (field) => {
                return topForces.reduce((sum, force) => {
                    const impact = impactData[force.id];
                    return sum + (impact ? impact[field] : 0);
                }, 0);
            };

            const handleSubmitToWebhook = async () => {
                const submissionData = {
                    userEmail: userEmail,
                    completedAt: new Date().toISOString(),
                    marketData: {
                        totalCustomers: marketData.totalCustomers,
                        avgSpending: marketData.avgSpending,
                        purchasesPerYear: marketData.purchasesPerYear,
                        grossMargin: marketData.grossMargin,
                        marketSize: marketSize,
                        profitPool: profitPool
                    },
                    drivingForces: drivingForces.filter(f => f.name.trim()).map(f => ({
                        name: f.name,
                        impact: f.impact,
                        probability: f.probability,
                        score: (2 * f.impact) + f.probability
                    })),
                    topForces: topForces.map(f => ({
                        name: f.name,
                        impact: f.impact,
                        probability: f.probability,
                        score: f.score
                    })),
                    impactAnalysis: impactData,
                    forecast: {
                        currentYear: currentYear,
                        futureYear: futureYear,
                        currentMarketSize: marketSize,
                        currentProfitPool: profitPool,
                        futureMarketSize: future.marketSize,
                        futureProfitPool: future.profitPool,
                        futureCustomers: future.customers,
                        futureMargin: future.margin,
                        growthPercentage: future.growth
                    }
                };

                const result = await submitToWebhook(submissionData);
                
                if (result.success) {
                    alert('✅ Submission saved successfully!');
                } else {
                    alert('❌ Submission failed. Please try again.');
                }
                
                return result.success;
            };

            return (
                <main className="p-12 max-w-7xl mx-auto">
                    <div className="animate-in">
                        <div className="numbered-section mb-8">
                            [03] FUTURE IMPACT
                        </div>

                        <div className="bg-black text-white border-4 border-black p-6 mb-8">
                            <h3 className="plaak text-3xl mb-2">ESTIMATE FUTURE IMPACT</h3>
                            <p className="text-xl">
                                For each of your top forces, estimate the % change on market variables. Use positive or negative numbers.
                            </p>
                            </div>

                        {/* SIDE BY SIDE LAYOUT: Matrix on Left, Forecast on Right */}
                        <div className="grid grid-cols-2 gap-8 mb-12">
                            {/* LEFT: IMPACT MATRIX */}
                            <div>
                                <div className="overflow-x-auto">
                                    <table className="w-full border-2 border-black">
                                        <thead>
                                            <tr className="bg-black text-white">
                                                <th className="p-3 text-left text-sm">Market Variable</th>
                                                {topForces.map((force, idx) => (
                                                    <th key={force.id} className="p-2 text-center text-xs">
                                                        <div className="font-bold">#{idx + 1}</div>
                                                        <div className="font-normal opacity-80">{force.name.slice(0, 15)}{force.name.length > 15 ? '...' : ''}</div>
                                                    </th>
                                                ))}
                                                <th className="p-3 text-center bg-gray-800 text-sm">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr className="border-t border-gray-300">
                                                <td className="p-3 font-bold bg-gray-50">Customers</td>
                                                {topForces.map(force => (
                                                    <td key={force.id} className="p-2 text-center">
                                                        <input
                                                            type="number"
                                                            className="worksheet-input text-center w-16 text-sm p-2"
                                                            placeholder="0"
                                                            value={impactData[force.id]?.customers || ''}
                                                            onChange={(e) => updateImpact(force.id, 'customers', e.target.value)}
                                                        />
                                                        <div className="text-xs text-gray-500">%</div>
                                                    </td>
                                                ))}
                                                <td className="p-3 text-center font-bold bg-gray-100">
                                                    <span className="plaak text-xl">{getTotalChange('customers').toFixed(1)}%</span>
                                                </td>
                                            </tr>
                                            <tr className="border-t border-gray-300">
                                                <td className="p-3 font-bold bg-gray-50">Spending</td>
                                                {topForces.map(force => (
                                                    <td key={force.id} className="p-2 text-center">
                                                        <input
                                                            type="number"
                                                            className="worksheet-input text-center w-16 text-sm p-2"
                                                            placeholder="0"
                                                            value={impactData[force.id]?.spending || ''}
                                                            onChange={(e) => updateImpact(force.id, 'spending', e.target.value)}
                                                        />
                                                        <div className="text-xs text-gray-500">%</div>
                                                    </td>
                                                ))}
                                                <td className="p-3 text-center font-bold bg-gray-100">
                                                    <span className="plaak text-xl">{getTotalChange('spending').toFixed(1)}%</span>
                                                </td>
                                            </tr>
                                            <tr className="border-t border-gray-300">
                                                <td className="p-3 font-bold bg-gray-50">Purchases</td>
                                                {topForces.map(force => (
                                                    <td key={force.id} className="p-2 text-center">
                                                        <input
                                                            type="number"
                                                            className="worksheet-input text-center w-16 text-sm p-2"
                                                            placeholder="0"
                                                            value={impactData[force.id]?.purchases || ''}
                                                            onChange={(e) => updateImpact(force.id, 'purchases', e.target.value)}
                                                        />
                                                        <div className="text-xs text-gray-500">%</div>
                                                    </td>
                                                ))}
                                                <td className="p-3 text-center font-bold bg-gray-100">
                                                    <span className="plaak text-xl">{getTotalChange('purchases').toFixed(1)}%</span>
                                                </td>
                                            </tr>
                                            <tr className="border-t border-gray-300">
                                                <td className="p-3 font-bold bg-gray-50">Margin</td>
                                                {topForces.map(force => (
                                                    <td key={force.id} className="p-2 text-center">
                                                        <input
                                                            type="number"
                                                            className="worksheet-input text-center w-16 text-sm p-2"
                                                            placeholder="0"
                                                            value={impactData[force.id]?.margin || ''}
                                                            onChange={(e) => updateImpact(force.id, 'margin', e.target.value)}
                                                        />
                                                        <div className="text-xs text-gray-500">pts</div>
                                                    </td>
                                                ))}
                                                <td className="p-3 text-center font-bold bg-gray-100">
                                                    <span className="plaak text-xl">{getTotalChange('margin').toFixed(1)} pts</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {/* RIGHT: LIVE 3-YEAR FORECAST */}
                            <div className="bg-black text-white p-8 border-4 border-black sticky top-4">
                                <h2 className="plaak text-5xl mb-8 text-center">3-YEAR FORECAST</h2>
                                
                                <div className="mb-8">
                                    <div className="text-center mb-6 pb-6 border-b-2 border-gray-700">
                                        <div className="text-gray-400 text-lg mb-2">{currentYear}</div>
                                        <div className="plaak text-4xl mb-3">€ {Math.round(marketSize).toLocaleString()}</div>
                                        <div className="text-sm text-gray-400 mb-3">Current Market Size</div>
                                        <div className="text-gray-500 text-sm">
                                            Profit Pool: <span className="plaak text-lg text-white">€ {Math.round(profitPool).toLocaleString()}</span>
                                        </div>
                                    </div>
                                    
                                    <div className="text-center">
                                        <div className="text-lg mb-2 text-yellow-400">{futureYear}</div>
                                        <div className="plaak text-5xl mb-3 text-green-400">€ {Math.round(future.marketSize).toLocaleString()}</div>
                                        <div className="text-sm mb-3 text-yellow-400">Future Market Size</div>
                                        <div className="text-2xl plaak text-green-400 mb-4">
                                            {future.growth >= 0 ? '+' : ''}{future.growth.toFixed(1)}% GROWTH
                                        </div>
                                        <div className="text-gray-500 text-sm">
                                            Profit Pool: <span className="plaak text-lg text-green-400">€ {Math.round(future.profitPool).toLocaleString()}</span>
                                        </div>
                                    </div>
                                </div>

                                <div className="border-t-2 border-gray-700 pt-6">
                                    <h3 className="plaak text-xl mb-4 text-center text-yellow-400">DETAILED BREAKDOWN</h3>
                                    <div className="grid grid-cols-2 gap-4 text-center text-sm">
                                        <div>
                                            <div className="text-gray-400 text-xs mb-1">Customers</div>
                                            <div className="plaak text-lg">{marketData.totalCustomers.toLocaleString()}</div>
                                            <div className="text-gray-500 my-1">↓</div>
                                            <div className="plaak text-lg text-green-400">{future.customers.toLocaleString()}</div>
                                        </div>
                                        <div>
                                            <div className="text-gray-400 text-xs mb-1">Market Size</div>
                                            <div className="plaak text-base">€{Math.round(marketSize/1000)}K</div>
                                            <div className="text-gray-500 my-1">↓</div>
                                            <div className="plaak text-base text-green-400">€{Math.round(future.marketSize/1000)}K</div>
                                        </div>
                                        <div>
                                            <div className="text-gray-400 text-xs mb-1">Profit Pool</div>
                                            <div className="plaak text-base">€{Math.round(profitPool/1000)}K</div>
                                            <div className="text-gray-500 my-1">↓</div>
                                            <div className="plaak text-base text-green-400">€{Math.round(future.profitPool/1000)}K</div>
                                        </div>
                                        <div>
                                            <div className="text-gray-400 text-xs mb-1">Margin</div>
                                            <div className="plaak text-lg">{marketData.grossMargin}%</div>
                                            <div className="text-gray-500 my-1">↓</div>
                                            <div className="plaak text-lg text-green-400">{future.margin.toFixed(1)}%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                            {/* Navigation */}
                            <div className="flex justify-between">
                            <button className="btn-secondary text-lg py-3 px-6" onClick={onBack}>
                                    ← Back
                                </button>
                                <div className="flex gap-4">
                                <button className="btn-secondary text-lg py-3 px-6" onClick={() => window.print()}>
                                        📄 Export PDF
                                    </button>
                                <button 
                                        className="btn-primary text-lg py-3 px-8" 
                                        onClick={async (e) => {
                                            e.currentTarget.disabled = true;
                                            e.currentTarget.textContent = '⏳ Saving...';
                                            const success = await handleSubmitToWebhook();
                                            if (success) {
                                                e.currentTarget.textContent = '✅ Saved!';
                                                setTimeout(() => {
                                                    e.currentTarget.textContent = '💾 Save & Share with Team';
                                                    e.currentTarget.disabled = false;
                                                }, 2000);
                                            } else {
                                                e.currentTarget.textContent = '❌ Failed - Try Again';
                                                setTimeout(() => {
                                                    e.currentTarget.textContent = '💾 Save & Share with Team';
                                                    e.currentTarget.disabled = false;
                                                }, 2000);
                                            }
                                        }}
                                    >
                                        💾 Save & Share with Team
                                    </button>
                                </div>
                            </div>
                        </div>
                    </main>
            );
        }

        // Render App
        ReactDOM.render(<MarketSizeTool />, document.getElementById('root'));
    </script>
</body>
</html>
